{{ define "head" }}
    <script type='text/javascript' src='/static/js/jquery.tablesorter.min.js'></script>
    <script type='text/javascript' src='/static/js/jquery.tablesorter.widgets.min.js'></script>
    <script type='text/javascript' src='/static/js/parser-metric.js'></script>
    <script type='text/javascript' src='/static/js/parser-duration.js'></script> 
    <script type='text/javascript' src='/static/js/semver.js'></script> 
{{ end }} 
{{ define "menu-line-2" }}{{ end }}

{{ define "content" }}

<script type="text/javascript">
    window.onload=function() {
        setInterval(function() {window.location.reload();}, 60000);
    }
</script>

<script type="text/javascript">
    $(function(){
        $("#serverlist").tablesorter({
            widgets: ["saveSort"],
            dateFormat: "uk"
        });

    });
</script>

<h1>Database Snapshots</h1>
<p>Filter: <input type="text" id="filter" name="filter"><p>

<table class="table tablesorter table-striped" id="serverlist">
    <thead>
        <tr>
            <th>Instance</th>
            <th>Domain</th>
            <th>Snapshot</th>
            <th>Source</th>
            <th style="text-align: center;">Size on Disk</th>
            <th style="text-align: center;" class="sorter-duration">Created</th>
        </tr>
    </thead>

    <tbody>
        {{range .Snapshots}}
        <tr>
            <td><a href="{{ .URL }}" title="{{ .ServerName }} ({{ .Domain }})">{{ .ServerName }}</a></td>
            <td>{{ .Domain }}</td>
            <td>{{ .Name }}</td>
            <td>{{ .Source }}</td>
            <td style="text-align: center;" data-text="{{ .Size }}">{{ .Size | bytes }}</td>
            <td title='{{ .Created.Format "Mon, 02 January 2006 3:04 PM" }} (server time zone)' style="text-align: center;">{{ .CreatedUTC | shortDuration }}</td>
        </tr>
        {{end}}
    </tbody>
</table>

<script>
    $(document).ready(function(){
      $("#filter").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#serverlist tbody > tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });
</script>     


{{ end }}

